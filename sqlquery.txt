USE [951278]
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER PROCEDURE [dfed].[save_multiple_custodian_data_replication] 
@jsondata nvarchar(max)
AS
DECLARE

@CRTID_FETCH INT,
@POSITION_NAME_FETCH varchar(250),
@COUNTRY_NAME_FETCH varchar(250),
@CLASSIFICATION_NAME_FETCH varchar(250),
@CRT_ALIAS_NAME_FETCH VARCHAR(250),
@CRT_FIRST_NAME_FETCH  VARCHAR(250),
@CRT_EMAIL_FETCH VARCHAR(250),
@CRT_POSITION_FETCH VARCHAR(250),
@CRT_COUNTRY_FETCH VARCHAR(250),
@CRT_CLASSIFICATION_FETCH VARCHAR(250),
@CRT_ENTITY_FETCH VARCHAR(250),
@CRT_DEPARTMENT_FETCH VARCHAR(250)

BEGIN
	SELECT @CRT_FIRST_NAME_FETCH=CRT_FIRST_NAME, @CRT_EMAIL_FETCH=CRT_EMAIL, @CRT_POSITION_FETCH=CRT_POSITION_ID, @CRT_COUNTRY_FETCH=CRT_COUNTRY_ID, @CRT_ENTITY_FETCH=CRT_ENTITY, @CRT_DEPARTMENT_FETCH=CRT_DEPARTMENT, @CRT_ALIAS_NAME_FETCH=CRT_ALIAS, @CRT_CLASSIFICATION_FETCH=CRT_CLASSIFICATION_ID, @CRTID_FETCH=CRT_ID FROM  
	 OPENJSON ( @jsondata )  
	WITH (   
				  CRT_FIRST_NAME   varchar(200) '$.CRT_FIRST_NAME' ,
				  CRT_EMAIL varchar(200) '$.CRT_EMAIL',
				  CRT_POSITION_ID varchar(200) '$.CRT_POSITION_ID',
				  CRT_COUNTRY_ID varchar(200) '$.CRT_COUNTRY_ID',
				  CRT_ENTITY varchar(200) '$.CRT_ENTITY',
				  CRT_DEPARTMENT varchar(200) '$.CRT_DEPARTMENT',
				  CRT_ALIAS varchar(200) '$.CRT_ALIAS',
				  CRT_CLASSIFICATION_ID varchar(200) '$.CRT_CLASSIFICATION_ID',
				  CRT_ID varchar(200) '$.CRT_ID'
	 ) 
	
	UPDATE [dfed].[custodian_request_tracker_temp] SET EMAIL_VALIDATION_CHECK ='ddf'
END



